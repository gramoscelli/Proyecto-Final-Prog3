# Gu√≠a para crear Frontend Simple de Gesti√≥n de Tareas

## Estructura del proyecto

```
frontend/src/
‚îú‚îÄ‚îÄ App.js                    (MODIFICAR)
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ TodoList/
‚îÇ       ‚îî‚îÄ‚îÄ TodoList.js       (CREAR)
‚îî‚îÄ‚îÄ index.js                  (NO TOCAR)
```

---

## PASO 1: Dise√±o del Frontend (Sin API)

### 1.1 Crear el componente TodoList b√°sico

**Archivo:** `src/components/TodoList/TodoList.js`

```javascript
import React, { useState } from 'react';

const estados = ['pending', 'in_progress', 'completed', 'cancelled'];

function TodoList() {
  const [tasks, setTasks] = useState([
    // Datos de ejemplo para dise√±o
    {
      id: 1,
      title: 'Tarea de ejemplo',
      description: 'Esta es una descripci√≥n de prueba',
      status: 'pending'
    }
  ]);
  const [title, setTitle] = useState('');
  const [description, setDescription] = useState('');
  const [status, setStatus] = useState('pending');

  // Funciones temporales (sin API)
  const addTask = () => {
    if (title.trim() === '') return;
    
    const newTask = {
      id: Date.now(), // ID temporal
      title,
      description,
      status
    };

    setTasks([...tasks, newTask]);
    setTitle('');
    setDescription('');
    setStatus('pending');
  };

  const updateStatus = (id, newStatus) => {
    setTasks(tasks.map(task => 
      task.id === id ? { ...task, status: newStatus } : task
    ));
  };

  const deleteTask = (id) => {
    setTasks(tasks.filter(task => task.id !== id));
  };

  return (
    <div style={{ maxWidth: '500px', margin: '0 auto', fontFamily: 'Arial' }}>
      <h2>üìù Lista de Tareas</h2>

      {/* Formulario para agregar tarea */}
      <div style={{ 
        display: 'flex', 
        flexDirection: 'column', 
        gap: '8px', 
        marginBottom: '16px' 
      }}>
        <input
          type="text"
          placeholder="T√≠tulo"
          value={title}
          onChange={(e) => setTitle(e.target.value)}
        />
        <textarea
          placeholder="Descripci√≥n"
          value={description}
          onChange={(e) => setDescription(e.target.value)}
        />
        <select value={status} onChange={(e) => setStatus(e.target.value)}>
          {estados.map((s) => (
            <option key={s} value={s}>{s}</option>
          ))}
        </select>
        <button onClick={addTask}>Agregar tarea</button>
      </div>

      {/* Lista de tareas */}
      <ul style={{ listStyle: 'none', padding: 0 }}>
        {tasks.map((task) => (
          <li
            key={task.id}
            style={{
              border: '1px solid #ccc',
              borderRadius: '5px',
              padding: '10px',
              marginBottom: '10px',
              backgroundColor: '#f9f9f9',
            }}
          >
            <h3>{task.title}</h3>
            <p>{task.description}</p>
            <p>
              <strong>Estado:</strong>{' '}
              <select
                value={task.status}
                onChange={(e) => updateStatus(task.id, e.target.value)}
              >
                {estados.map((s) => (
                  <option key={s} value={s}>{s}</option>
                ))}
              </select>
            </p>
            <button onClick={() => deleteTask(task.id)}>Eliminar</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;
```

### 1.2 Actualizar App.js

**Archivo:** `src/App.js`

```javascript
import React from 'react';
import TodoList from './components/TodoList/TodoList';

function App() {
  return (
    <>
      <TodoList />
    </>
  );
}

export default App;
```

### 1.3 Verificar funcionamiento

En esta etapa deber√≠as poder:
- ‚úÖ Ver la interfaz de usuario
- ‚úÖ Agregar tareas (se guardan en memoria)
- ‚úÖ Cambiar el estado de las tareas
- ‚úÖ Eliminar tareas
- ‚úÖ Ver la tarea de ejemplo

**Nota:** Los datos se pierden al recargar la p√°gina porque a√∫n no usan la API.

---

## PASO 2: Conectar con la API

### 2.1 Configurar la URL de la API

Agregar al inicio del componente TodoList.js:

```javascript
// Obtener URL din√°mica de la API
const getApiUrl = () => {
  const protocol = window.location.protocol;
  const hostname = window.location.hostname;
  return `${protocol}//${hostname}:3001/api/tasks`;
};

const API_URL = getApiUrl();
```

### 2.2 Agregar useEffect para cargar datos

Importar useEffect y agregar la carga inicial:

```javascript
import React, { useState, useEffect } from 'react';

// Dentro del componente, despu√©s del useState inicial:
useEffect(() => {
  fetch(API_URL)
    .then(res => res.json())
    .then(data => setTasks(data.tasks || []))
    .catch(err => console.error('Error al cargar tareas:', err));
}, []);
```

### 2.3 Actualizar funci√≥n addTask

```javascript
const addTask = () => {
  if (title.trim() === '') return;
  const newTask = { title, description, status };

  fetch(API_URL, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify(newTask),
  })
    .then(res => res.json())
    .then(response => {
      setTasks([...tasks, response.task]); // Usar response.task
      setTitle('');
      setDescription('');
      setStatus('pending');
    })
    .catch(err => console.error('Error al crear tarea:', err));
};
```

### 2.4 Actualizar funci√≥n updateStatus

```javascript
const updateStatus = (id, newStatus) => {
  fetch(`${API_URL}/${id}`, {
    method: 'PUT',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ status: newStatus }),
  })
    .then(res => res.json())
    .then(response => {
      setTasks(tasks.map(t => (t.id === id ? response.task : t)));
    })
    .catch(err => console.error('Error al actualizar tarea:', err));
};
```

### 2.5 Actualizar funci√≥n deleteTask

```javascript
const deleteTask = (id) => {
  fetch(`${API_URL}/${id}`, {
    method: 'DELETE',
  })
    .then(() => {
      setTasks(tasks.filter(t => t.id !== id));
    })
    .catch(err => console.error('Error al eliminar tarea:', err));
};
```

### 2.6 Eliminar datos de ejemplo

Cambiar el useState inicial:

```javascript
const [tasks, setTasks] = useState([]); // Sin datos de ejemplo
```

---

## Estructura final del c√≥digo

### Componentes principales:

1. **App.js**: Componente ra√≠z que renderiza TodoList
2. **TodoList.js**: Componente principal con toda la l√≥gica

### Funcionalidades implementadas:

#### Estados del componente:
- `tasks`: Array de tareas
- `title`: T√≠tulo de nueva tarea
- `description`: Descripci√≥n de nueva tarea  
- `status`: Estado de nueva tarea

#### Funciones principales:
- `addTask()`: Crear nueva tarea
- `updateStatus()`: Cambiar estado de tarea existente
- `deleteTask()`: Eliminar tarea
- `useEffect()`: Cargar tareas al iniciar

#### Interfaz de usuario:
- **Formulario**: Campos para t√≠tulo, descripci√≥n y estado
- **Lista de tareas**: Muestra cada tarea con opci√≥n de cambiar estado y eliminar
- **Estilos inline**: CSS simple para dise√±o b√°sico

### Ventajas de este enfoque:

‚úÖ **Simple**: Un solo archivo por funcionalidad  
‚úÖ **Directo**: Sin complejidad innecesaria  
‚úÖ **Funcional**: CRUD completo implementado  
‚úÖ **Responsive**: URL de API din√°mica  
‚úÖ **Debugging**: Console.log para errores  

### Pasos para implementar:

1. **Crear la carpeta**: `src/components/TodoList/`
2. **Crear TodoList.js**: Con el c√≥digo del Paso 1 (sin API)
3. **Actualizar App.js**: Importar y usar TodoList
4. **Probar dise√±o**: Verificar que funciona sin API
5. **Agregar conexi√≥n API**: Implementar Paso 2
6. **Probar con backend**: Verificar que funciona con la API

### Requisitos del backend:

- ‚úÖ Endpoint GET `/api/tasks` - Lista tareas
- ‚úÖ Endpoint POST `/api/tasks` - Crear tarea  
- ‚úÖ Endpoint PUT `/api/tasks/:id` - Actualizar tarea
- ‚úÖ Endpoint DELETE `/api/tasks/:id` - Eliminar tarea

La aplicaci√≥n usar√° autom√°ticamente la IP correcta cambiando solo el puerto a 3001 para el backend.